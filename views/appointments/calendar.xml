<?xml version="1.0"?>
<openerp>
    <data>



<!-- CALENDAR -->
        <record model="ir.ui.view" id="oehealth.view_oeh_medical_event_calendar">
            <field name="name">appointment.calendar</field>
            <field name="model">oeh.medical.appointment</field>
            <field name="arch" type="xml">

                <calendar   string="Appointments" 
                            date_start="appointment_date" 
                            date_stop="appointment_end" 
                            date_delay="duration"
                            display="[x_display]" 
                            color="state" 
                            quick_add="False" 
                            mode="day">

                        <!--<field name="user_id"/>-->
                        <field name="doctor"/>
                        <field name="patient"/>
                        <field name="patient_status"/>
                        <field name="x_patient_name_short"/>
                        <field name="x_doctor_code"/>
                        <field name="x_display"/>
                </calendar>
            </field>
        </record>




<!-- ACTIONS - Calendar - Confirmed -->
        <record id="oeh_medical_appointment_action_calendar_confirmed" model="ir.actions.act_window">
                    <field name="name">Citas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>

                    <field name="view_mode">calendar,tree,form</field>

                    <field name="view_id" eval="False"/>

                    <field name="domain">[
                                            ('state', 'in', ['Scheduled']),
                                        ]
                    </field>

                    <field name="context">{}</field>

                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>







<!-- ACTIONS - Tree -->
        <record id="oeh_medical_appointment_action_tree_all" model="ir.actions.act_window">
                    <field name="name">Citas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
<!--
                    <field name="view_mode">tree,form,kanban,graph,pivot</field>
-->
                    <field name="view_mode">kanban,tree,calendar,form</field>

                    <field name="view_id" eval="False"/>

                    <field name="domain">[
                            ('appointment_date', '&gt;=',  datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                            ('appointment_date', '&lt;=', (datetime.date.today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d 05:00:00')),
                                        ]
                    </field>

                    <field name="context">{}</field>

                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>






<!-- ACTIONS - Tree - Confirmed -->
        <record id="oeh_medical_appointment_action_tree_confirmed" model="ir.actions.act_window">
                    <field name="name">Citas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
<!--
                    <field name="view_mode">tree,form,kanban,graph,pivot</field>
-->
                    <field name="view_mode">kanban,tree,calendar,form</field>

                    <field name="view_id" eval="False"/>

                    <field name="domain">[
                                            ('state', 'in', ['Scheduled']),
                            ('appointment_date', '&gt;=',  datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                            ('appointment_date', '&lt;=', (datetime.date.today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d 05:00:00')),
                                        ]
                    </field>

                    <field name="context">{}</field>

                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>




<!-- ACTIONS - Tree - Not Confirmed -->
        <record id="oeh_medical_appointment_action_tree_not_confirmed" model="ir.actions.act_window">
                    <field name="name">Citas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
<!--
                    <field name="view_mode">tree,form,kanban,graph,pivot</field>
-->
                    <field name="view_mode">kanban,tree,calendar,form</field>

                    <field name="view_id" eval="False"/>

                    <field name="domain">[
                                            ('state', 'in', ['pre_scheduled']),
                            ('appointment_date', '&gt;=',  datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                            ('appointment_date', '&lt;=', (datetime.date.today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d 05:00:00')),
                                        ]
                    </field>

                    <field name="context">{}</field>

                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>











<!-- ACTIONS - Today - Not Confirmed - Controls -->
        <record id="oeh_medical_appointment_action_tree_not_confirmed_control" model="ir.actions.act_window">
                    <field name="name">Controles</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
                    <field name="view_mode">tree,form</field>
                    <field name="view_id" eval="False"/>
                    <field name="context">{}</field>

<!--
                                            ('appointment_date', '&gt;=', datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                                            ('appointment_date','>=', ((context_today()-datetime.timedelta(days=0)).strftime('%Y-%m-%d'))),
                                            ('appointment_date', '>=', datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                                            ('appointment_date', '>=', (time.strftime('%Y-%m-%d'))),
-->
                    <field name="domain">[
                            ('appointment_date', '&gt;=',  datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                            ('appointment_date', '&lt;=', (datetime.date.today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d 05:00:00')),
                                            ('state', 'in', ['pre_scheduled']),
                                            ('x_type', 'in', ['control']),
                                        ]
                    </field>
                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>





<!-- ACTIONS -->
        <!-- Today - Not Confirmed - Consultations -->
        <record id="oeh_medical_appointment_action_tree_not_confirmed_consultation" model="ir.actions.act_window">
                    <field name="name">Consultas</field>
                    <field name="res_model">oeh.medical.appointment</field>
                    <field name="view_type">form</field>
                    <field name="view_mode">tree,form</field>
                    <field name="view_id" eval="False"/>
                    <field name="context">{}</field>

                    <field name="domain">[
                                ('appointment_date', '&gt;=',  datetime.datetime.now().strftime('%Y-%m-%d 05:00:00')),
                                ('appointment_date', '&lt;=', (datetime.date.today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d 05:00:00')),
                                ('state', 'in', ['pre_scheduled']),
                                ('x_type', 'in', ['consultation']),
                                        ]
                    </field>
                    <field name="help" type="html">
                      <p class="oe_view_nocontent_create">
                        Click to add a new appointment.
                      </p><p>
                        oeHealth appointment screen can easily find all of your appointment details;
                      </p>
                    </field>
        </record>





    </data>
</openerp>
