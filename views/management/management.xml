<?xml version="1.0"?>
<openerp>
	<data>
		



		<!-- FORM --> 
		<record model="ir.ui.view" id="management_form_view">
			<field name="name">management.form</field>
			
			<field name="model">openhealth.management</field>
			
			<field name="arch" type="xml">

				<form string="Management Form">
					


					<!-- Header -->
					<header>

						<!-- Update Sales -->
						<button 
								type="object" 
								class="oe_highlight"

								name="update_sales"

								string="Actualizar Ventas"								
						/>


						<!-- Update Stats -->
						<button 
								type="object" 
								class="oe_highlight"

								name="update_stats"

								string="Stats"								
						/>



						<!-- Update counters -->
						<button 
								type="object" 
								class="oe_highlight"

								name="update_counters"

								string="Counters"								
						/>



						<!-- Update QC -->
						<button 
								type="object" 
								class="oe_highlight"

								name="update_qc"

								string="Quality Control"								
						/>







						<!-- Families -->
						<button 
								class="oe_highlight"
								type="action" 

								context="{
											'search_default_management_id': active_id,	
										}" 											
								
								name="%(management_family_line_form_action)d" 

								string="Ver Familias"	
						/>



						<!-- Doctores -->
						<button 
								class="oe_highlight"
								type="action" 

								context="{
											'search_default_management_id': active_id,	
										}" 											
								
								name="%(management_doctor_line_form_action)d" 

								string="Doctores"	
						/>



						<!-- Sales -->
						<button 
								class="oe_highlight"
								type="action" 

								context="{
											'search_default_management_id': active_id,	
										}" 											
								
								name="%(management_order_line_form_action)d" 

								string="Ventas"	
						/>
					</header>







					<!-- Sheet -->	
					<sheet>


						<group	string="Total"	col="3"		>


							<group>
								<field name="name"/>

								<field name="date_begin"/>

								<field name="date_end"/>
<!--
								<field name="write_date"	string="Actualizado"/>
-->
							</group>

							
							<group>
								<field name="total_amount"/>

								<field name="total_count"	string="Nr Ventas"	/>

								<field name="total_tickets"/>
							</group>

							<group>
								<field name="ratio_pro_con"/>
								<field name="nr_delta"/>
							</group>

						</group>



						<group		col="3"	>
							<group>
								<field name="nr_consultations"/>

								<field name="nr_products"	string="Productos"	/>

								<field name="nr_procedures"	string="Procedimientos"	/>
							</group>
						
							<group>
								<field name="amo_consultations"		/>

								<field name="amo_products"		string="Productos"	/>

								<field name="amo_procedures"	string="Procedimientos"	/>
							</group>


							<group>
								<field name="avg_consultations"			/>

								<field name="avg_products"		string="Productos"	/>

								<field name="avg_procedures"	string="Procedimientos"	/>
							</group>

						</group>


<!--
						<group>
							<group>
							</group>
						
							<group>
							</group>
						</group>
-->


						<!-- Notebook --> 
						<notebook>	



							<!-- Doctores --> 
							<page	string="Por Doctor">
								<field name="doctor_line">
									<tree string="Doctor"	limit="1000"	>	
										
										<!-- Open Button -->
										<button 
											type="object" 
											class="oe_highlight"	
											name="open_line_current" 
											string="e"
										/>



										<field name="name"/>

										<field name="nr_consultations"/>

										<field name="nr_procedures"/>

										<field name="nr_products"/>



<!--
										<field name="nr_procedures_co2"/>

										<field name="nr_procedures_quick"/>

										<field name="nr_medicals"/>
-->


										<field name="ratio_pro_con"/>

										<field name="ratio_pro_con_co2"/>

										<field name="ratio_pro_con_quick"/>




										<field name="x_count"/>
									
										<field name="amount"/>
									</tree>
								</field>
							</page>





							<!-- Orders --> 
							<page	string="Ventas">

								<field name="order_line">


									<tree string="Ventas"	limit="500"		default_order='x_date_created desc'	

										colors="
										red:delta==2
										"
										>	

<!--
										green:state=='sent';
										blue:state=='sale';
										grey:state in ('cancel')
-->


										<field name="patient"/>

										<field name="doctor"/>



										<field name="serial_nr"/>

										<field name="delta"/>



										<field name="x_date_created"/>

										<field name="family"/>

										<field name="sub_family"/>

										<field name="product_id"/>

										<field name="product_uom_qty"/>

										<field name="price_unit"/>

										<field name="price_subtotal"/>

									</tree>
								</field>
							</page>

<!--
										<field name="name"/>
										<field name="state"/>
								<field name="order_line"/>
-->




							<!-- Familias --> 
							<page	string="Familias">

								<field name="family_line">
								
									<tree string="Familia"	limit="1000"	>	
								

										<field name="idx"/>



										<field name="name_sp"/>

										<field name="meta_sp"/>
<!--
										<field name="name"/>

										<field name="meta"/>
-->


										<field name="amount"/>

										<field name="x_count"/>

									</tree>
								</field>
							</page>




							<!-- Sub Familias --> 
							<page	string="Sub Familias">

								<field name="sub_family_line">
								
									<tree string="Subfamilia"	limit="1000"	>	
								

										<field name="idx"/>


										<field name="name_sp"/>

<!--
-->
										<field name="name"/>

										<field name="x_count"/>

										<field name="amount"/>
									</tree>
								</field>
							</page>











						</notebook>
					</sheet>
				</form>
			</field>
		</record>




	
		<!-- TREE --> 
		<record model="ir.ui.view" id="management_view_tree">
			<field name="name">openhealth.management.tree</field>
			<field name="model">openhealth.management</field>
			<field name="arch" type="xml">

<!--
				<tree string="Account Contasis Tree" default_order='date desc'>
-->
				<tree string="Management Tree">
					

					<field name="name"/>
<!--
					<field name="write_date"	string="Actualizado"/>
-->
					<field name="date_begin"	string="Fecha Inicio"/>

					<field name="date_end"		string="Fecha Fin"/>

					<field name="total_count"/>

					<field name="total_tickets"/>



					<field name="nr_consultations"/>
					<field name="nr_procedures"/>
					<field name="ratio_pro_con"/>



					<field name="total_amount"/>
				</tree>
			</field>
		</record>







		<!-- ACTION - Order -->
		<record model="ir.actions.act_window" id="management_list_action">

			<field name="name">An√°lisis de Ventas</field>
			
			<field name="res_model">openhealth.management</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>

			<field name="domain">[]</field>

			<field name="context">{}</field>

			<!--
			<field name="domain">[]</field>
			<field name="context">{}</field>
			<field name="view_id" eval="False"/>			
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">Create the first order
				</p>
			</field>
			-->
		</record>




	</data>
</openerp>
