<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>



<!-- FORM --> 
		<record model="ir.ui.view" id="oeh_medical_patient_view">
			<field name="name">Patient</field>
			<field name="model">oeh.medical.patient</field>         
			<field name="type">form</field>
			<field name="priority" eval="1"/>
			<field name="arch" type="xml">
				<form string="Patient">


					<!-- Header --> 
					<header>

						<!-- First Treatment -->
						<button 
							type="object" 
							class="oe_highlight"
							attrs="{ 'invisible':[  ('x_treatment_count','!=',0),   ]}"
							name="open_treatment" 
							string="Crear Primer TRATAMIENTO"                           
						/>

						<!-- Last Treatment -->
						<button 
							type="object" 
							class="oe_highlight"
							attrs="{ 'invisible':[  ('x_treatment_count','=',0),    ]}"
							name="open_treatment" 
							string="Ultimo Tratamiento"                             
						/>

						<!-- EC -->
						<button 
							type="object" 
							class="oe_highlight"
							attrs="{ 'invisible':[  ('x_treatment_count','=',0),    ]}"
							name="generate_order_report" 
							string="EC" 
						/>


						<!-- Test -->
<!--
						<button 
							type="object" 
							class="oe_highlight"
							name="test" 
							string="TEST" 
							groups="openhealth.roots"
						/>
-->

						<!-- Budget --> 
<!--
						<button 
							type="object" 
							class="oe_highlight"

							name="create_budget" 
							
							string="Crear Presupuesto" 
						/>
-->




						<!-- Right Buttons --> 

						<!-- Deactivate --> 
						<button 
							type="object" 
							class="oe_highlight oe_right"
							name="deactivate_patient" 
							string="Desactivar" 
						/>

						<!-- Activate --> 
						<button 
							type="object" 
							class="oe_highlight oe_right"
							name="activate_patient" 
							string="Activar" 
							groups="openhealth.roots"
						/>

						<!-- Print --> 
						<button 
							type="object" 
							class="oe_highlight oe_right"
							name="print_patient_hc" 
							string="Imprimir" 
						/>

						<!-- Validate --> 
						<button 
							type="object" 
							class="oe_highlight oe_right"
							name="validate" 
							string="Validate" 
							groups="openhealth.roots"
						/>
					</header>




					<!-- Sheet -->  
					<sheet>

						<!-- Persona --> 
						<div class="oe_left" style="width: 500px;">
							<field name="image" widget="image" class="oe_left oe_avatar" options="{&quot;preview_image&quot;: &quot;image_medium&quot;, &quot;size&quot;: [90, 90]}"/>
							<div class="oe_title">
								<label string="Apellidos" class="oe_edit_only"/>
								<h1>
<!--
									<field name="name"  class="oe_read_only" />
-->                         
									<field name="name"/>

								</h1>
								<field name="age"/>
							</div>
						</div>



						<!-- Active Buttons -->
						<div class="oe_left" style="width: 100px;">

							<!-- Treatments --> 
							<button type="action" class="oe_stat_button" 
								name="%(treatment_form_action)d"    
								context="{
											'search_default_patient': active_id,    
										}"                                          
								icon="fa-list">
								<field string="Tratamientos" name="x_treatment_count" widget="statinfo"/>
							</button>                       
						</div>

						<!-- Number Medical history -->
						<div class="oe_right" >
							<h1>
								<field string="Número HC:"  name="x_id_code"/>
								<field string="Número:"     invisible="1"   name="identification_code"/>
							</h1>
						</div>




						<!-- Fields -->
						<group>
							<group>     

								<field name="x_last_name"   class="oe_edit_only"
															attrs="{     
																		'required':     [('x_legacy', '!=', True)], 
																}"
									/>

								<field name="x_first_name"  class="oe_edit_only"
															attrs="{     
																		'required':     [('x_legacy', '!=', True)], 
																}"  
									/>

								<field name="partner_id"  string="Contacto"  readonly="1"  required="0"/>

								<field name="x_date_record"         readonly="1"/>



								<field name="create_date"           readonly="0"	groups="openhealth.roots"/>

								<field name="x_test"    groups="openhealth.roots"/>

								<field name="x_test_case"    groups="openhealth.roots"/>
							</group>

							<group>
								<field name="x_admin_mode"  groups="openhealth.roots"/>

								<field name="x_autofill"    groups="openhealth.roots"/>

								<field name="x_legacy"                  groups="openhealth.roots"/>

								<field name="x_data_complete"       groups="openhealth.roots"/>

								<field name="x_treatment_count"         groups="openhealth.roots"/>


								<field name="property_product_pricelist"    required="1"/>

								<field name="x_vip"			invisible="1"/>

								<field name="x_card"/>
							</group>

						</group>					



						<group>
							<group>

								<field string='Fecha de nacimiento'  name="dob"     required="1" />

								<field name="x_nationality"/>

								<field name="x_id_doc_type"         attrs="{
																				'required':[('x_admin_mode', '!=', True), ],
																			}"
									/>

								<field name="x_id_doc"      attrs="{
																				'required':[('x_admin_mode', '!=', True), ],
																			}"
									/>


							</group>

							<group>
								<field string='Sexo' name="sex"     required="1" />

								<field name="x_first_contact"   attrs="{    'required':     [
																								('x_legacy', '!=', True)
																							], 
																	}"  
									/>

								<field name="x_first_impression"/>

								<field name="x_allergies"       	required="0"/>                              
							</group>
						</group>


						<!-- Notebook -->
						<notebook></notebook>
					</sheet>
				</form>
			</field>
		</record>
		<!-- FORM --> 




<!-- TREE -->
		<record model="ir.ui.view" id="oehealth.oeh_medical_patient_tree">
			<field name="name">patient.tree</field>
			<field name="model">oeh.medical.patient</field>
			<field name="arch" type="xml">          
				<tree string="Patient Tree"  default_order='x_id_code desc'>

					<field name="name"/>

					<field name="x_test"            groups='openhealth.roots'   />      
					<field name="x_test_case"       groups='openhealth.roots'   />      

					<field name="x_id_code"/>       
					<field name="x_date_record"     groups='openhealth.roots'   string="Fecha de creación"  />
					<field name="x_legacy"/>
					<field name="x_data_complete"/>


					<field name="city"/>
					<field name="street2_sel"/>
					<field name="street2_char"/>

					<field name="x_id_doc_type" string="Tipo Doc"/>
					<field name="x_id_doc_type_code"    string="Cod"/>
					<field name="x_id_doc"      string="Nr Doc"/>

					<field name="x_dni"/>
					<field name="x_ruc"/>
					<field name="x_firm"/>

					<field name="treatment_ids"/>
				</tree>
			</field>
		</record>



<!-- TREE 2 -->
		<record model="ir.ui.view" id="oeh_medical_patient_tree_2">
			<field name="name">patient.tree</field>
			<field name="model">oeh.medical.patient</field>
			<field name="arch" type="xml">  
				<tree string="Patient Tree" >
					<field name="name"/>
					<field name="x_id_code"/>       
					<field name="x_id_doc_type" string="Tipo Doc"/>
					<field name="x_id_doc_type_code"    string="Cod"/>
					<field name="x_id_doc"      string="Nr Doc"/>
					<field name="x_dni"/>
					<field name="x_ruc"/>
					<field name="city"          string="Depto"/>
				</tree>
			</field>
		</record>

	</data>
</openerp>
