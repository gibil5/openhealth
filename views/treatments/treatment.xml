<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>



<!-- FORM --> 
		<record model="ir.ui.view" id="treatment_form_view">
			<field name="name">treatment.form</field>
			<field name="model">openhealth.treatment</field>
			<field name="priority" eval="1"/>
			<field name="arch" type="xml">
				<form string="Treatment Form">
					<header>


<!-- Buttons - State Dependent -->
						
						<!-- Create Budget Consultation --> 
						<button 
							type="object" 
							class="oe_highlight"

							name="create_order_con"

							string="Crear PRESUPUESTO - Consulta"

							groups="openhealth.roots,openhealth.reception,openhealth.caja,openhealth.managers,openhealth.directors"

							states="empty,appointment"
						/>

						<!-- Create Consultation --> 
						<button 
							type="object" 
							class="oe_highlight"                            
							name="create_consultation"
							string="Crear CONSULTA"
							groups="openhealth.roots,openhealth.physicians,openhealth.managers,openhealth.directors"

							states="invoice_consultation"
						/>

						<!-- Create Reco --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_service"
							string="Crear RECOMENDACION" 
							groups="openhealth.roots,openhealth.physicians,openhealth.managers,openhealth.directors"

							states="consultation,service"
						/>

						<!-- Create Order --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_order_pro" 
							string="Crear PRESUPUESTO - Pro" 
					groups="openhealth.roots,openhealth.physicians,openhealth.reception,openhealth.caja,openhealth.managers,openhealth.directors"
					
							states="service"
						/>

						<!-- Create Procedure --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_procedure_man" 
							string="Crear PROCEDIMIENTO" 
							groups="openhealth.roots,openhealth.physicians,openhealth.managers,openhealth.directors"

							states="invoice_procedure"
						/>



<!-- State less - Archivers -->
						<!-- Create Consultation --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_consultation" 
							string="CON"

							groups="openhealth.archivers"
						/>

						<!-- Create Service --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_service"
							string="REC" 

							groups="openhealth.archivers"
						/>

						<!-- Create Order --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_order_pro" 
							string="PresPro" 

							groups="openhealth.archivers"
						/>

						<!-- Create Procedure --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_procedure_man"
							string="PRO" 

							groups="openhealth.archivers"
						/>

						<!-- Create New Procedure --> 
						<button 
							type="object" 
							class="oe_highlight"
							name="create_new_procedure"
							string="Crear Nuevo PROCEDIMIENTO" 

							states="empty"

							groups="openhealth.archivers"
						/>

<!--
								statusbar_visible="appointment, invoice_consultation, consultation, service, budget_procedure, invoice_procedure, procedure, sessions, controls, done"
-->
						<!-- State -->
						<field  name="state" 
								widget="statusbar"

								statusbar_visible="empty, budget_consultation, invoice_consultation, consultation, service, budget_procedure, invoice_procedure, procedure, sessions, controls, done"

						/>
					</header>





<!-- Sheet -->  
					<sheet>

						<div>                       
							<!-- Persona --> 
							<div class="oe_left"  style="width: 250px;">
								<div class="oe_title" >

									<h1 class="jx_title">Tratamiento</h1>   

									<h2><field name="name" class="oe_inline" invisible="1"/></h2>

								</div>      
								<group></group>
									<h2><field name="patient"/></h2>
							</div>
<!--
									<h1><field name="name" class="oe_inline"/></h1>
-->




<!-- Buttons Nr ofs --> 
<!--
							<div class="oe_left" style="width: 400px;" name="buttons">
							<div class="oe_right" name="buttons">
-->
							<div class="oe_left" style="width: 550px;" name="buttons">
							


								<!-- Nr Budgets - Consultation -->
								<button type="action" class="oe_stat_button" icon="fa-list"

										attrs="{ 'invisible':[  ('nr_budgets_cons','=',0),  ]}"

										name="%(order_form_tre_action)d"

										context="{
													'search_default_patient': patient,
													'default_treatment': active_id,
													'default_x_family': 'consultation', 
												}"  
										>
									<field string="Presu Con" name="nr_budgets_cons" widget="statinfo"/>
								</button>



								<!-- Nr Sales - Consultation -->
								<button type="action" class="oe_stat_button" icon="fa-list"
										attrs="{ 'invisible':[  ('nr_invoices_cons','in',[ False, 0, ]), ]}"
										name="%(order_form_tre_action)d"
										context="{                                  
													'search_default_patient': patient,
													'default_treatment': active_id,
													'default_x_family': 'consultation', 
												}"  
										>

									<field string="Venta Con" name="nr_invoices_cons" widget="statinfo"/>
								</button>




								<!-- Consultations -->
								<button type="action" class="oe_stat_button"
									name="%(consultation_form_action)d"
									context="{                                  
												'search_default_treatment': active_id,
											}"
									icon="fa-list"
									attrs="{ 'invisible':[  ('nr_consultations','=',0), ]}"
									>
									<field string="Consulta" name="nr_consultations" widget="statinfo"/>
								</button>




<!--
								<button type="action" class="oe_stat_button" icon="fa-list" invisible="0"
									name="%(service_list_action)d"
-->

								<!-- Recommendations -->								
								<button type="action" class="oe_stat_button" icon="fa-list"
									name=""
									context="{                                  
												'search_default_treatment': active_id,
											}"

									attrs="{ 'invisible':[  ('nr_services','=',0), ]}"
									>
									<field string="Recom" name="nr_services" widget="statinfo"/>
								</button>



								<!-- Nr Budgets Pro - IMPORTANT -->
								<button type="action" class="oe_stat_button" icon="fa-list"
										name="%(order_form_tre_action)d"
										context="{                                  
													'search_default_patient': patient,
													'default_treatment': active_id,
													'default_x_family': 'procedure', 
												}"  

										attrs="{ 'invisible':[  ('nr_budgets_pro','=',0), ]}">

									<field string="Presu Pro" name="nr_budgets_pro" widget="statinfo"/>
								</button>


								<!-- Invoices - Pro -->
								<button type="action" class="oe_stat_button" icon="fa-list"
										name="%(order_form_tre_action)d"                                    
										context="{                                  
													'search_default_patient': patient,
													'default_treatment': active_id,
													'default_x_family': 'procedure', 
												}"
										attrs="{ 'invisible':[  ('nr_invoices_pro','=',0), ]}"
									>
									<field string="Venta Pro" name="nr_invoices_pro" widget="statinfo"/>
								</button>


								<!-- Procedures -->
								<button type="action" class="oe_stat_button" 
									name="%(procedure_form_action)d"
									context="{                                  
											'search_default_treatment': active_id,
											}"
									icon="fa-list"
									attrs="{ 'invisible':[  ('nr_procedures','=',0), ]}"
									>
									<field string="Proc" name="nr_procedures" widget="statinfo"/>
								</button>
						

								<!-- Sessions -->
								<button type="action" class="oe_stat_button"
									name="%(session_med_form_action)d"
									context="{                                  
											'search_default_treatment': active_id,
											}"
									icon="fa-list"
									attrs="{ 'invisible':[  ('nr_sessions','=',0), ]}"
									>
									<field string="Sesion" name="nr_sessions" widget="statinfo"/>
								</button>
						

								<!-- Controls -->
								<button type="action" class="oe_stat_button" icon="fa-list"
									name="%(control_form_action)d"
									context="{                                  
											'search_default_treatment': active_id,
											}"
									attrs="{ 'invisible':[  ('nr_controls','=',0), ]}"
									>
									<field string="Controles" name="nr_controls" widget="statinfo"/>
								</button>
							</div>
						</div>


								   
<!-- Fields -->
						<!-- Padding --> 
						<group col="3">
							<group>

								<field name="x_test"   groups="openhealth.roots"/>
								<field name="patient_sex"/>
								<field name="patient_age"/>
								<field name="patient_city"/>
								<field name="vip" />
							</group>

							<group>
								<field name="physician"         required="1"/>
								<field name="vspace" />
								<field name="chief_complaint"   required="1"/>
								<field name="vspace" />
								<field name="active"/>
							</group>

							<group>
								<field name="start_date"/>
								<field name="vspace" />
								<field name="treatment_closed"  invisible="0"/>
								<field name="vspace" />


								<button 
									type="object" 
									name="toggle_add_procedures" 
									attrs="{ 'invisible':[  ('add_procedures','!=',False),  ]}"
									string="Manual"                                     
								/>

								<button 
									type="object" 
									class="oe_highlight"
									name="toggle_add_procedures" 
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									string="Manual"                                     
								/>

								<field name="add_procedures"    invisible="1"/>
							</group>
						</group>





<!-- Test -->
<!--
<hr></hr>
-->
						<group 	 attrs="{ 'invisible':[  ('x_test','==',False),  ]}">
							<group>

								<!-- Scenarios -->
								<field name="x_test_scenario"/>
								
								<!-- Price lists -->
								<field name="test_pricelist_2019"/>
								<field name="test_pricelist_2018"/>

								<!-- Reports -->
<!--
								<field name="report_management"/>
								<field name="report_marketing"/>
								<field name="report_account"/>
								<field name="report_contasis"/>
								<field name="report_product"/>
-->
										<!-- Test Integration -->
										<button 
											type="object" 
											class="oe_highlight"
											help='Test Integration'
											name="test_integration" 
											
											string="Test Integration"
										/>
										<!-- Reset -->
										<button 
											type="object" 
											class="oe_highlight"
											groups="openhealth.roots"
											help='Tests: Reset'
											name="test_reset"

											string="Reset"
										/>

							</group>

							<group>

										<!-- Test Integration -->
										<!-- Reset -->
<!--
									<group>
										<button 
											type="object" 
											class="oe_highlight"
											help='Test Integration'
											name="test_integration" 
											
											string="Test Integration"
										/>

									</group>

									<group>
										<button 
											type="object" 
											class="oe_highlight"
											groups="openhealth.roots"
											help='Tests: Reset'
											name="test_reset"

											string="Reset"
										/>
								
									</group>
-->

									<!-- Test Cycle -->
									<group col="3">

										<!-- Create Budget Consultation -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_budget_consultation" 
											
											string="Budget Con"
										/>

										<!-- Create Sale Consultation -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_sale_consultation" 
											
											string="Sale Con"
										/>



										<!-- Create Consultation -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_consultation" 
											
											string="Consultation"
										/>


										<!-- Create Recommendations -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_recommendations" 
											
											string="Recommendations"
										/>



										<!-- Create Budget Procedure -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_budget_procedure" 
											
											string="Budget Pro"
										/>


										<!-- Create Sale procedure -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_sale_procedure" 
											
											string="Sale Pro"
										/>




										<!-- Create Procedure -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_procedure" 
											
											string="Procedure"
										/>

										<!-- Create Sessions -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_sessions"
											
											string="Sessions"
										/>

										<!-- Create Controls -->
										<button 
											type="object" 
											class="oe_highlight"

											name="test_create_controls" 
											
											string="Controls"
										/>

									</group>


									<!-- Reports -->
<!--
									<group>

										<button 
												type="object"
												class="oe_highlight"
												name="test_report_management"
												string="MGT"
										/>

										<button 
												type="object"
												class="oe_highlight"
												name="test_report_marketing"
												string="MKT"
										/>

										<button 
												type="object"
												class="oe_highlight"
												name="test_report_account"
												string="TXT"
										/>

										<button 
												type="object"
												class="oe_highlight"
												name="test_report_contasis"
												string="ACC"
										/>

										<button 
												type="object"
												class="oe_highlight"
												name="test_report_product"
												string="PROD"
										/>
									</group>
-->
							</group>
						</group>



<!-- Manual --> 
<!--
<hr></hr>
-->
						<group  col="5" >

							<!-- PRESU --> 
							<group>
								<button 
									type="object" 
									class="oe_highlight"

									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"

									name="create_order_con"

									string="PRESU CON" 
								/>
							</group>

							<!-- CONS --> 
							<group>
								<button 
									type="object" 
									class="oe_highlight"
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									name="create_consultation"
									string="CONSULTA"
								/>
							</group>

							<!-- RECO --> 
							<group>
								<button 
									type="object" 
									class="oe_highlight"
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									name="create_service"
									string="RECOM"
								/>
							</group>

							<!-- PRESU --> 
							<group>
								<button 
									type="object" 
									class="oe_highlight"
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									name="create_order_pro"
									string="PRESU" 
								/>
							</group>

							<!-- PROC --> 
							<group>
								<button 
									type="object" 
									class="oe_highlight"
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									name="create_procedure_man"
									string="PROCEDIMIENTO" 
								/>
							</group>


							<!-- Manual -->
<!--								
							<group>
								<button 
									type="object" 
									name="toggle_add_procedures" 
									attrs="{ 'invisible':[  ('add_procedures','!=',False),  ]}"
									string="Manual"                                     
								/>

								<button 
									type="object" 
									class="oe_highlight"
									name="toggle_add_procedures" 
									attrs="{ 'invisible':[  ('add_procedures','==',False),  ]}"
									string="Manual"                                     
								/>

								<field name="add_procedures"    invisible="1"/>
							</group>
-->

						</group>




						<!-- Padding -->
<!--
						<group>
							<group></group>
							<group></group>
						</group>
-->
						<!-- Notebook --> 
						<notebook></notebook>
					</sheet>
				</form>
			</field>
		</record>
		<!-- FORM --> 
						<!-- Padding --> 


<!--
								<field name="user_id"/>
								<field name="vspace" />
-->
<!--
							<page string="Electronic">
								<field name="electronic_order"/>
							</page>
-->





<!-- FORM 2 --> 
		<record model="ir.ui.view" id="treatment_2_form_view">
			<field name="name">treatment.form</field>
			<field name="model">openhealth.treatment</field>
			<field name="priority" eval="5"/>
			<field name="arch" type="xml">
				<form string="Treatment 2 Form">
					<header>

							<!-- CO2 --> 
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_co2"
								string="LASER CO2"
							/>

							<!-- Quick --> 
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_quick"
								string="QUICK LASER"
							/>

							<!-- Excilite -->
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_excilite"
								string=" EXCILITE"
							/>

							<!-- M22-IPL --> 
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_ipl"
								string=" M22-IPL"
							/>

							<!-- M22-NDYAG -->
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_ndyag"
								string=" M22-NDYAG"
							/>



							<!-- Product --> 
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_product"
								string="PRODUCTOS"
							/>



							<!-- T. MEDICO -->
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_medical"
								string="T. MEDICO"
							/>

							<!-- Cosmeto -->
							<button 
								type="object" 
								class="oe_highlight"    
								name="create_service_cosmetology"
								string="Cosmiatria"
							/>
					</header>
					<sheet>
						<notebook></notebook>
					</sheet>
				</form>
			</field>
		</record>





<!-- TREE --> 
		<record model="ir.ui.view" id="treatment_tree_view">
			<field name="name">treatment.tree</field>
			<field name="model">openhealth.treatment</field>
			<field name="arch" type="xml">

				<tree string="Treatment Tree"
colors="
red:state=='empty';
green:state in ('appointment', 'invoice_consultation', 'consultation', 'service', 'invoice_procedure', 'procedure', 'sessions');
grey:state=='done';
blue:state=='controls'
">

					<field name="patient"/>

					<field name="physician"/>
					<field name="chief_complaint"   string="Motivo"/>
<!--
					<field name="name"			groups="openhealth.roots"/>
-->
					<field name="start_date"/>
					<field name="write_date"    string="Fecha actualizacion"/>
					<field name="state"/>
				</tree>
			</field>
		</record>



<!--                
				<tree default_order='start_date desc'>
grey:state=='done';
-->

<!--
limit = 40
					<field name="flag"/>
					<field name="procedure_ids"     groups="openhealth.roots"/>
-->



<!--
					<field name="x_test"/>

					<field name="name"/>
					<field name="patient_sex"/>
					<field name="patient_age"/>
					<field name="patient_city"/>

					<field name="duration"/>
					<field name="end_date"/>
					<field name="treatment_open"/>
					<field name="id"/>
					<field name="nr_appointments"/>                 
					<field name="nr_consultations"  string="Consultas"  style="text-align:center;"/>
					<field name="nr_orders"/>
					<field name="nr_procedures"     string="Procedimientos" style="color:red;"/>
					<field name="nr_controls"/>
					<field name="nr_sessions"/>
					<field name="nr_evaluations"/>
					<field name="nr_services"/>
					<field name="price_total"/>

					<field name="partner_id"/>
-->
		
		
		
<!-- SEARCH -->
		<record id="view_medical_treatment_filter" model="ir.ui.view">
		   <field name="name">Treatment Search</field>
		   <field name="model">openhealth.treatment</field>
		   <field name="arch" type="xml">
			   <search string="Treatments">
					<field  name="patient" 
						filter_domain="['|',('patient','ilike',self),('physician','ilike',self)]"/>
					<group expand="1" string="Group By">
						<!--
						<filter name="Estado" context="{'group_by':'state'}"/>
						-->
						<filter name="Médico" context="{'group_by':'physician'}"/>
					</group>
			   </search>
		   </field>
	   </record>


	</data>
</openerp>
